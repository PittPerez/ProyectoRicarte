"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[920],{920:(D,f,s)=>{s.r(f),s.d(f,{SignUpPageModule:()=>j});var p=s(177),l=s(4341),m=s(4488),g=s(4964),c=s(467),e=s(4438),v=s(4714),S=s(1491),h=s(9381),U=s(3683),y=s(9981);function P(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"El nombre es requerido"),e.k0s())}function G(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"El nombre debe tener al menos 4 caracteres"),e.k0s())}function R(o,i){if(1&o&&(e.j41(0,"div",9),e.DNE(1,P,2,0,"div",10)(2,G,2,0,"div",10),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.form.controls.name.errors?null:t.form.controls.name.errors.required),e.R7$(),e.Y8G("ngIf",null==t.form.controls.name.errors?null:t.form.controls.name.errors.minlenght)}}function b(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"El correo es requerido"),e.k0s())}function I(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"Ingrese un correo valido"),e.k0s())}function E(o,i){if(1&o&&(e.j41(0,"div",9),e.DNE(1,b,2,0,"div",10)(2,I,2,0,"div",10),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.required),e.R7$(),e.Y8G("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.email)}}function F(o,i){1&o&&(e.j41(0,"div"),e.EFF(1,"La contrase\xf1a es requerido"),e.k0s())}function T(o,i){if(1&o&&(e.j41(0,"div",9),e.DNE(1,F,2,0,"div",10),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.form.controls.password.errors?null:t.form.controls.password.errors.required)}}const $=[{path:"",component:(()=>{var o;class i{constructor(){this.form=new l.gE({uid:new l.MJ(""),email:new l.MJ("",[l.k0.required,l.k0.email]),password:new l.MJ("",[l.k0.required]),name:new l.MJ("",[l.k0.required,l.k0.minLength(4)])}),this.firebaseSvc=(0,e.WQX)(v.f),this.utilsSvc=(0,e.WQX)(S.T)}ngOnInit(){}submit(){var r=this;return(0,c.A)(function*(){if(r.form.valid){const n=yield r.utilsSvc.loading();yield n.present(),r.firebaseSvc.signUp(r.form.value).then(function(){var a=(0,c.A)(function*(d){yield r.firebaseSvc.updateUser(r.form.value.name);let u=d.user.uid;r.form.controls.uid.setValue(u),r.setUserInfo(u)});return function(d){return a.apply(this,arguments)}}()).catch(a=>{console.log(a),r.utilsSvc.presentToast({message:a.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{n.dismiss()})}})()}setUserInfo(r){var n=this;return(0,c.A)(function*(){if(n.form.valid){const a=yield n.utilsSvc.loading();yield a.present();let d=`users/${r}`;delete n.form.value.password,n.firebaseSvc.setDocument(d,n.form.value).then(function(){var u=(0,c.A)(function*(k){n.utilsSvc.saveInLocalStorage("user",n.form.value),n.utilsSvc.routerLink("/main/home"),n.form.reset()});return function(k){return u.apply(this,arguments)}}()).catch(u=>{console.log(u),n.utilsSvc.presentToast({message:u.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{a.dismiss()})}})()}}return(o=i).\u0275fac=function(r){return new(r||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-sign-up"]],decls:14,vars:8,consts:[["backButton","/auth","title","Registro"],[1,"d-flex-center"],[1,"auth-form",3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","name","icon","person-outline","type","text","label","Nombre",3,"control"],["class","validators",4,"ngIf"],["autocomplete","email","icon","mail-outline","type","email","label","Correo",3,"control"],["icon","lock-closed-outline","type","password","label","contrase\xf1a",3,"control"],["expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","person-add-outline"],[1,"validators"],[4,"ngIf"]],template:function(r,n){1&r&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content")(2,"div",1)(3,"form",2),e.bIt("ngSubmit",function(){return n.submit()})("keypress.enter",function(){return n.submit()}),e.nrm(4,"app-logo")(5,"app-custom-input",3),e.DNE(6,R,3,2,"div",4),e.nrm(7,"app-custom-input",5),e.DNE(8,E,3,2,"div",4),e.nrm(9,"app-custom-input",6),e.DNE(10,T,2,1,"div",4),e.j41(11,"ion-button",7),e.EFF(12," Reg\xedstrate "),e.nrm(13,"ion-icon",8),e.k0s()()()()),2&r&&(e.R7$(3),e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("control",n.form.controls.name),e.R7$(),e.Y8G("ngIf",n.form.controls.name.errors&&n.form.controls.name.touched),e.R7$(),e.Y8G("control",n.form.controls.email),e.R7$(),e.Y8G("ngIf",n.form.controls.email.errors&&n.form.controls.email.touched),e.R7$(),e.Y8G("control",n.form.controls.password),e.R7$(),e.Y8G("ngIf",n.form.controls.password.errors&&n.form.controls.password.touched),e.R7$(),e.Y8G("disabled",n.form.invalid))},dependencies:[p.bT,l.qT,l.cb,m.Jm,m.W9,m.iq,h.l,U.H,y.Z,l.j4]}),i})()}];let M=(()=>{var o;class i{}return(o=i).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild($),g.iI]}),i})();var Y=s(3887);let j=(()=>{var o;class i{}return(o=i).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,l.YN,m.bv,M,Y.G]}),i})()}}]);