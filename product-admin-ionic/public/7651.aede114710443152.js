"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7651],{7651:(h,f,t)=>{t.r(f),t.d(f,{AuthPageModule:()=>S});var a=t(177),s=t(4341),m=t(4488),u=t(4964),c=t(467),o=t(4438),g=t(4714),v=t(1491),P=t(9381),A=t(3683),y=t(9981);function F(n,l){1&n&&(o.j41(0,"div"),o.EFF(1,"El correo es requerido"),o.k0s())}function E(n,l){1&n&&(o.j41(0,"div"),o.EFF(1,"Ingrese un correo valido"),o.k0s())}function I(n,l){if(1&n&&(o.j41(0,"div",11),o.DNE(1,F,2,0,"div",12)(2,E,2,0,"div",12),o.k0s()),2&n){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.required),o.R7$(),o.Y8G("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.email)}}function M(n,l){1&n&&(o.j41(0,"div"),o.EFF(1,"La contrase\xf1a es requerido"),o.k0s())}function T(n,l){if(1&n&&(o.j41(0,"div",11),o.DNE(1,M,2,0,"div",12),o.k0s()),2&n){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.required)}}const C=[{path:"",component:(()=>{var n;class l{constructor(){this.form=new s.gE({email:new s.MJ("",[s.k0.required,s.k0.email]),password:new s.MJ("",[s.k0.required])}),this.firebaseSvc=(0,o.WQX)(g.f),this.utilsSvc=(0,o.WQX)(v.T)}ngOnInit(){}submit(){var i=this;return(0,c.A)(function*(){if(i.form.valid){const e=yield i.utilsSvc.loading();yield e.present(),i.firebaseSvc.signIn(i.form.value).then(d=>{i.getUserInfo(d.user.uid)}).catch(d=>{console.log(d),i.utilsSvc.presentToast({message:d.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{e.dismiss()})}})()}getUserInfo(i){var e=this;return(0,c.A)(function*(){if(e.form.valid){const d=yield e.utilsSvc.loading();yield d.present(),e.firebaseSvc.getDocument(`users/${i}`).then(p=>{e.utilsSvc.saveInLocalStorage("user",p),e.utilsSvc.routerLink("/main/home"),e.form.reset(),e.utilsSvc.presentToast({message:`Te damos la bienvenida ${p.name}`,duration:1500,color:"primary",position:"middle",icon:"person-circle-outline"})}).catch(p=>{console.log(p),e.utilsSvc.presentToast({message:p.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{d.dismiss()})}})()}}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=o.VBU({type:n,selectors:[["app-auth"]],decls:17,vars:6,consts:[["title","Login"],[1,"d-flex-center"],[1,"auth-form",3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","email","icon","mail-outline","type","email","label","Correo",3,"control"],["class","validators",4,"ngIf"],["icon","lock-closed-outline","type","password","label","contrase\xf1a",3,"control"],["routerLink","forgot-password",1,"ion-text-end"],["expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","log-in-outline"],["routerLink","sign-up","expand","block","mode","ios","fill","outline",1,"ion-margin-top"],["slot","end","name","person-add-outline"],[1,"validators"],[4,"ngIf"]],template:function(i,e){1&i&&(o.nrm(0,"app-header",0),o.j41(1,"ion-content")(2,"div",1)(3,"form",2),o.bIt("ngSubmit",function(){return e.submit()})("keypress.enter",function(){return e.submit()}),o.nrm(4,"app-logo")(5,"app-custom-input",3),o.DNE(6,I,3,2,"div",4),o.nrm(7,"app-custom-input",5),o.DNE(8,T,2,1,"div",4),o.j41(9,"p",6),o.EFF(10,"\xbfOlvidaste tu contrase\xf1a?"),o.k0s(),o.j41(11,"ion-button",7),o.EFF(12," Ingresar "),o.nrm(13,"ion-icon",8),o.k0s(),o.j41(14,"ion-button",9),o.EFF(15," Reg\xedstrate "),o.nrm(16,"ion-icon",10),o.k0s()()()()),2&i&&(o.R7$(3),o.Y8G("formGroup",e.form),o.R7$(2),o.Y8G("control",e.form.controls.email),o.R7$(),o.Y8G("ngIf",e.form.controls.email.errors&&e.form.controls.email.touched),o.R7$(),o.Y8G("control",e.form.controls.password),o.R7$(),o.Y8G("ngIf",e.form.controls.password.errors&&e.form.controls.password.touched),o.R7$(3),o.Y8G("disabled",e.form.invalid))},dependencies:[a.bT,s.qT,s.cb,m.Jm,m.W9,m.iq,m.N7,u.Wk,P.l,A.H,y.Z,s.j4]}),l})()},{path:"sign-up",loadChildren:()=>t.e(920).then(t.bind(t,920)).then(n=>n.SignUpPageModule)},{path:"forgot-password",loadChildren:()=>t.e(7005).then(t.bind(t,7005)).then(n=>n.ForgotPasswordPageModule)}];let G=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[u.iI.forChild(C),u.iI]}),l})();var R=t(3887);let S=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[a.MD,s.YN,m.bv,G,R.G]}),l})()},9981:(h,f,t)=>{t.d(f,{Z:()=>m});var a=t(4438),s=t(4488);let m=(()=>{var u;class c{constructor(){}ngOnInit(){}}return(u=c).\u0275fac=function(g){return new(g||u)},u.\u0275cmp=a.VBU({type:u,selectors:[["app-logo"]],decls:6,vars:0,consts:[["color","primary","name","shield-outline",1,"shield-icon"],["color","primary"]],template:function(g,v){1&g&&(a.nrm(0,"ion-icon",0),a.j41(1,"ion-text",1)(2,"h1")(3,"strong"),a.EFF(4,"Admin"),a.k0s(),a.EFF(5,"App"),a.k0s()())},dependencies:[s.iq,s.IO],styles:[".shield-icon[_ngcontent-%COMP%]{font-size:80px;margin-top:40px}h1[_ngcontent-%COMP%]{margin-top:0}"]}),c})()}}]);