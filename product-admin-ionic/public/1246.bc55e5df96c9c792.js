"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1246],{1246:(x,m,o)=>{o.r(m),o.d(m,{ProfilePageModule:()=>T});var g=o(177),P=o(4341),r=o(4488),f=o(4964),d=o(467),e=o(4438),v=o(4714),h=o(1491),y=o(9381);function M(t,i){if(1&t&&e.nrm(0,"img",6),2&t){let l;const n=e.XpG();e.Y8G("src",null==(l=n.user())?null:l.image,e.B4B)}}function I(t,i){1&t&&e.nrm(0,"ion-icon",7)}const S=[{path:"",component:(()=>{var t;class i{constructor(){this.firebaseSvc=(0,e.WQX)(v.f),this.utilsSvc=(0,e.WQX)(h.T)}ngOnInit(){}user(){return this.utilsSvc.getFromLocalStorage("user")}takeImage(){var n=this;return(0,d.A)(function*(){let a=n.user(),s=`users/${a.uid}`;const c=(yield n.utilsSvc.takePicture("imagen de perfil")).dataUrl,p=yield n.utilsSvc.loading();yield p.present();let F=`${a.uid}/profile`;a.image=yield n.firebaseSvc.uploadImage(F,c),n.firebaseSvc.updateDocument(s,{image:a.image}).then(function(){var u=(0,d.A)(function*(R){n.utilsSvc.saveInLocalStorage("user",a),n.utilsSvc.presentToast({message:"Imagen actualizada exitosamente",duration:1500,color:"success",position:"middle",icon:"checkmark-circle-outline"})});return function(R){return u.apply(this,arguments)}}()).catch(u=>{console.log(u),n.utilsSvc.presentToast({message:u.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{p.dismiss()})})()}}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-profile"]],decls:11,vars:4,consts:[["title","Perfil",3,"showMenu"],[1,"ion-padding-top","ion-text-center"],[3,"src",4,"ngIf"],["class","empty-icon","name","person-circle-outline",4,"ngIf"],["mode","ios","size","small","shape","round",1,"photo-btn",3,"click"],["name","camera-outline"],[3,"src"],["name","person-circle-outline",1,"empty-icon"]],template:function(n,a){if(1&n&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"ion-avatar"),e.DNE(3,M,1,1,"img",2)(4,I,1,0,"ion-icon",3),e.k0s(),e.j41(5,"ion-button",4),e.bIt("click",function(){return a.takeImage()}),e.nrm(6,"ion-icon",5),e.k0s(),e.j41(7,"h2"),e.EFF(8),e.k0s(),e.j41(9,"h4"),e.EFF(10,"Vendedor"),e.k0s()()),2&n){let s,c;e.Y8G("showMenu",!0),e.R7$(3),e.Y8G("ngIf",null==(s=a.user())?null:s.image),e.R7$(),e.Y8G("ngIf",!(null!=(c=a.user())&&c.image)),e.R7$(4),e.JRh(a.user().name)}},dependencies:[g.bT,r.mC,r.Jm,r.W9,r.iq,y.l],styles:["ion-avatar[_ngcontent-%COMP%]{width:140px;height:140px;margin:0 auto}.photo-btn[_ngcontent-%COMP%]{position:relative;bottom:25px}h2[_ngcontent-%COMP%]{margin-bottom:0}ion-item[_ngcontent-%COMP%]{--padding-top: 15px}.empty-icon[_ngcontent-%COMP%]{font-size:140px;opacity:30%}"]}),i})()}];let C=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[f.iI.forChild(S),f.iI]}),i})();var G=o(3887);let T=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,P.YN,r.bv,C,G.G]}),i})()}}]);